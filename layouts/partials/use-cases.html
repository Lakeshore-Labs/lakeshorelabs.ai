<section id="use-cases" class="use-cases">
    <div class="container">
        {{ with .Site.Data.usecases }}
        <div class="section-header">
            <h2>{{ .title }}<br><span class="highlight">{{ .subtitle }}</span></h2>
            <p>{{ .description }}</p>
        </div>

        <!-- Filter buttons -->
        <div class="case-filters">
            <button class="filter-btn active" data-filter="all">All Results</button>
            <button class="filter-btn" data-filter="quick-roi">ROI < 14 Days</button>
            <button class="filter-btn" data-filter="high-savings">$10K+ Monthly</button>
            <button class="filter-btn" data-filter="time-savers">Time Savers</button>
            <button class="filter-btn" data-filter="revenue-boosters">Revenue Growth</button>
        </div>

        <!-- Cases Grid -->
        <div class="cases-grid">
            {{ range .cases }}
            <div class="case-card" 
                 data-roi="{{ .roi_days }}"
                 data-money="{{ replace (replace (or .money_saved .money_gained) "$" "") "," "" }}"
                 data-category="{{ if .money_gained }}revenue{{ else }}savings{{ end }}">
                
                <!-- Card Header -->
                <div class="card-header">
                    <span class="case-type">{{ .badge }}</span>
                </div>

                <!-- Card Content -->
                <div class="card-content">
                    <h3 class="case-title">{{ .business_type }}</h3>
                    <p class="case-challenge">{{ .problem }}</p>
                    
                    <!-- Metrics Display -->
                    <div class="metrics">
                        <!-- Time Metrics -->
                        {{ if .time_before }}
                        <div class="metric-row time-metric">
                            <div class="before">
                                <span class="label">Before</span>
                                <span class="value">{{ .time_before }}</span>
                            </div>
                            <div class="arrow">→</div>
                            <div class="after">
                                <span class="label">After</span>
                                <span class="value success">{{ .time_after }}</span>
                            </div>
                        </div>
                        {{ end }}

                        <!-- Response Metrics -->
                        {{ if .response_before }}
                        <div class="metric-row response-metric">
                            <div class="before">
                                <span class="value">{{ .response_before }}</span>
                            </div>
                            <div class="arrow">→</div>
                            <div class="after">
                                <span class="value success">{{ .response_after }}</span>
                            </div>
                        </div>
                        {{ end }}

                        <!-- No-show Metrics -->
                        {{ if .noshow_before }}
                        <div class="metric-row">
                            <div class="progress-bar">
                                <div class="progress-fill" data-before="{{ .noshow_before }}" data-after="{{ .noshow_after }}">
                                    <span class="progress-label">No-shows: {{ .noshow_before }} → {{ .noshow_after }}</span>
                                </div>
                            </div>
                        </div>
                        {{ end }}

                        <!-- Other Metrics -->
                        {{ if .deals_increase }}
                        <div class="metric-highlight">
                            <span class="big-number">{{ .deals_increase }}</span>
                            <span class="metric-label">more deals</span>
                        </div>
                        {{ end }}

                        {{ if .conversion_boost }}
                        <div class="metric-highlight">
                            <span class="big-number">{{ .conversion_boost }}</span>
                            <span class="metric-label">conversion</span>
                        </div>
                        {{ end }}

                        {{ if .close_rate }}
                        <div class="metric-highlight">
                            <span class="big-number">{{ .close_rate }}</span>
                            <span class="metric-label">close rate</span>
                        </div>
                        {{ end }}

                        {{ if .churn_before }}
                        <div class="metric-row">
                            <div class="before">
                                <span class="label">Churn</span>
                                <span class="value">{{ .churn_before }}</span>
                            </div>
                            <div class="arrow">→</div>
                            <div class="after">
                                <span class="value success">{{ .churn_after }}</span>
                            </div>
                        </div>
                        {{ end }}
                    </div>

                    <!-- Solution & Impact -->
                    <div class="solution-section">
                        <div class="solution-name">{{ .solution }}</div>
                        
                        <div class="impact">
                            <div class="money-impact {{ if .money_gained }}gains{{ end }}">
                                {{ if .money_saved }}
                                <span class="money-value" data-value="{{ .money_saved }}">{{ .money_saved }}</span>
                                <span class="impact-label">saved</span>
                                {{ else if .money_gained }}
                                <span class="money-value" data-value="{{ .money_gained }}">+{{ .money_gained }}</span>
                                <span class="impact-label">gained</span>
                                {{ end }}
                            </div>
                            
                            <div class="roi-timeline">
                                <span class="roi-days">{{ .roi_days }}</span>
                                <span class="roi-label">day ROI</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            {{ end }}
        </div>

        <!-- Summary Statistics -->
        {{ with .summary }}
        <div class="summary-stats">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number" data-count="{{ .total_clients }}">0</div>
                    <div class="stat-label">Happy Businesses</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" data-count="{{ .average_roi }}">0%</div>
                    <div class="stat-label">Average ROI</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" data-count="{{ replace .total_hours_saved "/mo" "" }}">0</div>
                    <div class="stat-label">Hours Saved Monthly</div>
                </div>
                <div class="stat-card highlight">
                    <div class="stat-number" data-count="{{ replace (replace .total_money_impact "$" "") "/mo" "" }}">$0</div>
                    <div class="stat-label">Total Monthly Impact</div>
                </div>
            </div>
            
            <div class="stats-footer">
                <span>Fastest ROI: <strong>{{ .fastest_roi }}</strong></span>
                <span class="separator">•</span>
                <span>Average Setup: <strong>{{ .implementation_time }}</strong></span>
            </div>
        </div>
        {{ end }}

        <!-- CTA -->
        <div class="section-cta">
            <a href="{{ .cta_link }}" class="button button-primary">{{ .cta_text }}</a>
            <p class="cta-subtext">Free 15-minute audit • See your potential savings • No obligation</p>
        </div>
        {{ end }}
    </div>
</section>